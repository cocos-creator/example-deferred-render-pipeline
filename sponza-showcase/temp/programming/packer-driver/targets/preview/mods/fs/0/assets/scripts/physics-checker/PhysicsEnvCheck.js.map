{"version":3,"sources":["file:///D:/Deferred_RenderPipeline/sponza-showcase/assets/scripts/physics-checker/PhysicsEnvCheck.ts"],"names":["_decorator","Component","Enum","LabelComponent","SpriteComponent","ccclass","property","menu","EPhysicsItem","CANNON","AMMO","PhysicsEnvCheck","CANNON_AMMO","onLoad","lbCom","sprCom","window","CC_PHYSICS_BUILTIN","node","getChildByName","getComponent","string","CC_PHYSICS_CANNON","CC_PHYSICS_AMMO","name","physics","BUILTIN","ALL","enabled","getComponentInChildren"],"mappings":"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","sourcesContent":["import { _decorator, Component, Enum, LabelComponent, Node, SpriteComponent } from 'cc';\r\nconst { ccclass, property, menu } = _decorator;\r\n\r\nenum EPhysicsItem {\r\n    BUILTIN = 1 << 0,\r\n    CANNON = 1 << 1,\r\n    AMMO = 1 << 2,\r\n    CANNON_AMMO = EPhysicsItem.CANNON + EPhysicsItem.AMMO,\r\n    ALL = -1,\r\n}\r\nEnum(EPhysicsItem);\r\n\r\n@ccclass('PhysicsEnvCheck')\r\n@menu('physics/PhysicsEnvCheck')\r\nexport class PhysicsEnvCheck extends Component {\r\n\r\n    // @property({ type: EPhysicsItem })\r\n    public physics: EPhysicsItem = EPhysicsItem.CANNON_AMMO;\r\n\r\n    public onLoad () {\r\n        let lbCom: LabelComponent;\r\n        let sprCom: SpriteComponent;\r\n\r\n        if (window.CC_PHYSICS_BUILTIN) {\r\n            lbCom = this.node.getChildByName('desc').getComponent(LabelComponent);\r\n            lbCom.string = '当前物理：builtin';\r\n        } else if (window.CC_PHYSICS_CANNON) {\r\n            lbCom = this.node.getChildByName('desc').getComponent(LabelComponent);\r\n            lbCom.string = '当前物理：cannon.js';\r\n        } else if (window.CC_PHYSICS_AMMO) {\r\n            lbCom = this.node.getChildByName('desc').getComponent(LabelComponent);\r\n            lbCom.string = '当前物理：ammo.js';\r\n        } else {\r\n            lbCom = this.node.getChildByName('desc').getComponent(LabelComponent);\r\n            lbCom.string = '当前物理：none';\r\n        }\r\n\r\n        const name = this.node.name;\r\n        if (name === 'cannon-ammo') {\r\n            this.physics = EPhysicsItem.CANNON_AMMO;\r\n        } else if (name === 'builtin') {\r\n            this.physics = EPhysicsItem.BUILTIN;\r\n        } else if (name === 'cannon') {\r\n            this.physics = EPhysicsItem.CANNON;\r\n        } else if (name === 'ammo') {\r\n            this.physics = EPhysicsItem.AMMO;\r\n        } else if (name === 'builtin-cannon-ammo') {\r\n            this.physics = EPhysicsItem.ALL;\r\n        }\r\n\r\n        switch (this.physics) {\r\n            case EPhysicsItem.ALL:\r\n                break;\r\n            case EPhysicsItem.CANNON_AMMO:\r\n                if (window.CC_PHYSICS_CANNON || window.CC_PHYSICS_AMMO) {\r\n                    break;\r\n                }\r\n                lbCom = this.node.getChildByName('lb').getComponent(LabelComponent);\r\n                lbCom.enabled = true;\r\n                lbCom.string = '测试此场景需要将物理模块设置为 cannon.js 或 ammo.js';\r\n                sprCom = this.getComponentInChildren(SpriteComponent);\r\n                sprCom.enabled = true;\r\n                break;\r\n            case EPhysicsItem.CANNON:\r\n                if (!window.CC_PHYSICS_CANNON) {\r\n                    lbCom = this.node.getChildByName('lb').getComponent(LabelComponent);\r\n                    lbCom.enabled = true;\r\n                    lbCom.string = '测试此场景需要将物理模块设置为 cannon.js';\r\n                    sprCom = this.getComponentInChildren(SpriteComponent);\r\n                    sprCom.enabled = true;\r\n                }\r\n                break;\r\n            case EPhysicsItem.AMMO:\r\n                if (!window.CC_PHYSICS_AMMO) {\r\n                    lbCom = this.node.getChildByName('lb').getComponent(LabelComponent);\r\n                    lbCom.enabled = true;\r\n                    lbCom.string = '测试此场景需要将物理模块设置为 ammo.js';\r\n                    sprCom = this.getComponentInChildren(SpriteComponent);\r\n                    sprCom.enabled = true;\r\n                }\r\n                break;\r\n            case EPhysicsItem.BUILTIN:\r\n                if (!window.CC_PHYSICS_BUILTIN) {\r\n                    lbCom = this.node.getChildByName('lb').getComponent(LabelComponent);\r\n                    lbCom.enabled = true;\r\n                    lbCom.string = '测试此场景需要将物理模块设置为 builtin';\r\n                    sprCom = this.getComponentInChildren(SpriteComponent);\r\n                    sprCom.enabled = true;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}